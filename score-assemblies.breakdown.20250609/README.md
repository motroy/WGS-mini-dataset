Here is a summary of the main tools (software/packages) and their commands used in the Snakefile from the score-assemblies repository:

---

**1. Pomoxis**
- assess_assembly: assess_assembly -r {input.ref} -i {input.assembly} ...
- assess_homopolymers: assess_homopolymers count/analyse ...
- minimap2: minimap2 -x asm5 ... (for alignment)
- samtools sort: for BAM file sorting

**2. BUSCO**
- busco: busco -q -c {threads} -f -m genome -l {lineage} -o {wildcards.id} -i {input}

**3. QUAST**
- quast: quast -t {threads} --glimmer -o ... -r {reference} {assemblies}

**4. MUMmer (dnadiff)**
- dnadiff: perl $CONDA_PREFIX/bin/dnadiff -p ... {reference} {assembly}
- Processing output using grep, sed, perl

**5. NUCdiff**
- nucdiff: nucdiff {reference} {assembly} {output_dir} nucdiff

**6. UniProt/DIAMOND/Prodigal/Seqkit**
- wget: wget ... (for downloading UniProt data)
- diamond makedb/blastp: diamond makedb --db ... --in ...; diamond blastp --threads ... --db ... --query ...
- prodigal: prodigal -a {output} -i {input}
- seqkit: seqkit stats -T -t protein {input}

**7. Bakta**
- wget: wget ... (for downloading Bakta DB)
- tar: tar --directory ... -xf ...
- amrfinder_update: amrfinder_update --force_update --database ...
- bakta: bakta --db ... --output ... --prefix ... --threads ... {input.fa}

**8. R (with Rscript)**
- R scripts (via Rscript and rmarkdown): scripts in R for generating plots and HTML reports:
  - scripts/plot-assess_assembly.R
  - scripts/plot-busco.R
  - scripts/plot-dnadiff.R
  - scripts/plot-nucdiff.R
  - scripts/plot-ideel.R
  - Rscript -e 'rmarkdown::render(...)' for HTML report

**9. Other Utilities**
- grep, sed, awk, perl: used frequently for text processing in shell commands
- rm: for cleaning directories

---

Here are the main tools and the final output files from each that are used in generating the final report summary in the Snakefile of the score-assemblies repository:

### Final Report Rule
The report is generated by the rule: **report_html**, with output:
- score-assemblies-report.html

The inputs to this rule are the files that feed into the final report, grouped by tool:

---

#### 1. **BUSCO**
- `score-assemblies-data/busco/all_stats.tsv` (summary statistics for BUSCO)
  - Generated by: gather_stats_busco
- `score-assemblies-data/busco/busco_stats.pdf` (plots, but included in report for visualization)

#### 2. **IDEEL (UniProt/DIAMOND/Prodigal)**
- `score-assemblies-data/ideel/diamond/{id}.tsv` (list_ideel_uniprot_tsv) — Per-assembly DIAMOND/UniProt search results
- `score-assemblies-data/ideel/diamond-ref/{ref}/{id}_{ref}.tsv` (list_ideel_ref_tsv) — Per-assembly/reference protein comparison
- `score-assemblies-data/ideel/ideel_uniprot_histograms.pdf` and `score-assemblies-data/ideel/ideel_uniprot_boxplots.pdf` (plots, for visualization)
- `score-assemblies-data/ideel/{ref}_ideel_{type}.pdf` (list_ideel_ref_pdf, more protein comparison plots)

#### 3. **dnadiff (MUMmer)**
- `score-assemblies-data/dnadiff/all_stats.tsv` (summary table of dnadiff statistics, list_dnadiff)

#### 4. **nucdiff**
- `score-assemblies-data/nucdiff/all_stats.tsv` (summary table, list_nucdiff)

#### 5. **Pomoxis**
- `score-assemblies-data/pomoxis/assess_assembly_all_scores.tsv` (quality scores for all assemblies, list_pomoxis[0])
- `score-assemblies-data/pomoxis/assess_homopolymers_all_rel_len.tsv` (homopolymer relative length, list_pomoxis[1])
- `score-assemblies-data/pomoxis/assess_homopolymers_all_correct_len.tsv` (homopolymer correct length, list_pomoxis[2])

#### 6. **Bakta**
- `score-assemblies-data/bakta/{id}/{id}.txt` (list_bakta_out) — One file per assembly with annotation summary

---

### Summary Table

| Tool | Final Output File(s) Used for Report |
|--------------|---------------------------------------------------------------------------------------------|
| BUSCO | score-assemblies-data/busco/all_stats.tsv |
| IDEEL | score-assemblies-data/ideel/diamond/{id}.tsv, score-assemblies-data/ideel/diamond-ref/{ref}/{id}_{ref}.tsv |
| dnadiff | score-assemblies-data/dnadiff/all_stats.tsv |
| nucdiff | score-assemblies-data/nucdiff/all_stats.tsv |
| Pomoxis | score-assemblies-data/pomoxis/assess_assembly_all_scores.tsv, score-assemblies-data/pomoxis/assess_homopolymers_all_rel_len.tsv, score-assemblies-data/pomoxis/assess_homopolymers_all_correct_len.tsv |
| Bakta | score-assemblies-data/bakta/{id}/{id}.txt |

**Note:** Some plots (PDFs) are also included in the report for visualization, but the main summary files are TSV or TXT as listed above.
